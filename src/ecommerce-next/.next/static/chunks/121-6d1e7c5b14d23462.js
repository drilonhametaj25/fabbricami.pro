"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[121],{4527:function(t,e,a){a.d(e,{I:function(){return h}});var r=a(7437),n=a(29),o=a.n(n),s=a(2265),l=a(7648),i=a(3145),d=a(6498),c=a(8997),u=a(2449),f=a(2208),x=a(3947),m=a(4508);function h(t){let{product:e,showQuickAdd:a=!0,className:n}=t,[h,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),w=(0,s.useRef)(null),j=(0,s.useRef)(null),{addItem:S}=(0,x.x)(),N=e.onSale&&e.salePrice&&e.salePrice<e.price,k=N?e.salePrice:e.price,P=N?(0,m.$Q)(e.price,e.salePrice):0,O=e.imageUrl||e.mainImageUrl||"/images/placeholder-product.svg",C=(0,s.useCallback)(t=>{if(!w.current)return;let e=w.current,a=e.getBoundingClientRect(),r=t.clientX-a.left,n=t.clientY-a.top,o=a.width/2,s=a.height/2;d.ZP.to(e,{rotateX:(n-s)/20,rotateY:(o-r)/20,duration:.3,ease:"power2.out",transformPerspective:1e3}),j.current&&d.ZP.to(j.current,{x:r-100,y:n-100,opacity:.15,duration:.3})},[]),E=(0,s.useCallback)(()=>{p(!0),w.current&&d.ZP.to(w.current,{scale:1.02,boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3), 0 0 60px rgba(201, 162, 39, 0.1)",duration:.3,ease:"power2.out"})},[]),I=(0,s.useCallback)(()=>{p(!1),w.current&&d.ZP.to(w.current,{rotateX:0,rotateY:0,scale:1,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",duration:.5,ease:"power3.out"}),j.current&&d.ZP.to(j.current,{opacity:0,duration:.3})},[]),T=async t=>{if(t.preventDefault(),t.stopPropagation(),g)return;b(!0);let a=t.currentTarget;d.ZP.fromTo(a,{scale:1},{scale:.95,duration:.1,yoyo:!0,repeat:1});try{await S(e.id,1)}catch(t){console.error("Failed to add to cart:",t)}finally{b(!1)}};return(0,r.jsxs)("div",{ref:w,onMouseMove:C,onMouseEnter:E,onMouseLeave:I,style:{transformStyle:"preserve-3d"},className:"jsx-fb17ab9dadda5da5 "+((0,m.cn)("product-card group relative bg-surface-card rounded-2xl overflow-hidden","transform-gpu will-change-transform",n)||""),children:[(0,r.jsx)("div",{ref:j,style:{background:"radial-gradient(circle, rgba(201, 162, 39, 0.3), transparent 70%)",filter:"blur(30px)"},className:"jsx-fb17ab9dadda5da5 absolute w-[200px] h-[200px] rounded-full pointer-events-none opacity-0 z-10"}),(0,r.jsxs)(l.default,{href:"/product/".concat(e.slug),className:"block",children:[(0,r.jsxs)("div",{className:"jsx-fb17ab9dadda5da5 product-card-image relative aspect-[4/5] overflow-hidden",children:[(0,r.jsx)(i.default,{src:O,alt:e.name,fill:!0,sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw",className:"object-cover transition-transform duration-700 ease-out group-hover:scale-110",priority:!1}),(0,r.jsx)("div",{style:{background:"linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.1) 50%, transparent 60%)",transform:"translateX(-100%)",animation:h?"shine 1.5s ease-in-out infinite":"none"},className:"jsx-fb17ab9dadda5da5 absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),(0,r.jsxs)("div",{className:"jsx-fb17ab9dadda5da5 absolute top-3 left-3 flex flex-col gap-2 z-20",children:[e.isNew&&(0,r.jsx)("span",{className:"jsx-fb17ab9dadda5da5 px-3 py-1 bg-gold text-primary text-xs font-bold rounded-full shadow-lg",children:"NEW"}),N&&(0,r.jsxs)("span",{className:"jsx-fb17ab9dadda5da5 px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg",children:["-",P,"%"]}),!e.inStock&&(0,r.jsx)("span",{className:"jsx-fb17ab9dadda5da5 px-3 py-1 bg-surface-card/90 backdrop-blur-sm text-text-muted text-xs font-medium rounded-full",children:"Out of Stock"})]}),(0,r.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation();let e=t.currentTarget;d.ZP.fromTo(e,{scale:1},{scale:1.3,duration:.2,yoyo:!0,repeat:1,ease:"back.out(2)"}),v(!y)},"aria-label":y?"Remove from wishlist":"Add to wishlist",className:"jsx-fb17ab9dadda5da5 "+((0,m.cn)("absolute top-3 right-3 w-10 h-10 rounded-full flex items-center justify-center transition-all z-20","bg-surface-card/80 backdrop-blur-sm",y?"text-red-500":"text-text-muted hover:text-white hover:bg-surface-hover")||""),children:(0,r.jsx)(c.Z,{className:(0,m.cn)("w-5 h-5 transition-transform",y&&"fill-current scale-110")})}),(0,r.jsx)("div",{className:"jsx-fb17ab9dadda5da5 absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a&&e.inStock&&(0,r.jsxs)("div",{className:"jsx-fb17ab9dadda5da5 absolute bottom-4 left-4 right-4 flex gap-2 translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 z-20",children:[(0,r.jsx)("button",{onClick:T,disabled:g,className:"jsx-fb17ab9dadda5da5 flex-1 flex items-center justify-center gap-2 py-3 bg-gold text-primary font-medium rounded-xl hover:bg-gold-400 transition-all active:scale-95",children:g?(0,r.jsx)("span",{className:"jsx-fb17ab9dadda5da5 w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"jsx-fb17ab9dadda5da5",children:"Add"})]})}),(0,r.jsx)("span",{"aria-label":"View details",className:"jsx-fb17ab9dadda5da5 p-3 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-white/20 transition-colors cursor-pointer",children:(0,r.jsx)(f.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"jsx-fb17ab9dadda5da5 p-4 relative z-10",children:[e.category&&(0,r.jsx)("p",{className:"jsx-fb17ab9dadda5da5 text-text-muted text-xs uppercase tracking-wider mb-1",children:"string"==typeof e.category?e.category:e.category.name}),(0,r.jsx)("h3",{className:"jsx-fb17ab9dadda5da5 text-white font-medium mb-2 line-clamp-2 group-hover:text-gold transition-colors duration-300",children:e.name}),(e.rating||e.averageRating)&&(0,r.jsxs)("div",{className:"jsx-fb17ab9dadda5da5 flex items-center gap-1 mb-2",children:[[1,2,3,4,5].map(t=>(0,r.jsx)("svg",{viewBox:"0 0 20 20",className:"jsx-fb17ab9dadda5da5 "+((0,m.cn)("w-4 h-4 transition-colors",t<=Math.round(Number(e.rating||e.averageRating)||0)?"text-gold fill-current":"text-text-muted")||""),children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z",className:"jsx-fb17ab9dadda5da5"})},t)),(0,r.jsxs)("span",{className:"jsx-fb17ab9dadda5da5 text-text-muted text-xs ml-1",children:["(",e.reviewCount||0,")"]})]}),(0,r.jsxs)("div",{className:"jsx-fb17ab9dadda5da5 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"jsx-fb17ab9dadda5da5 text-gold font-semibold text-lg",children:(0,m.T4)(k)}),N&&(0,r.jsx)("span",{className:"jsx-fb17ab9dadda5da5 text-text-muted text-sm line-through",children:(0,m.T4)(e.price)})]})]})]}),(0,r.jsx)(o(),{id:"fb17ab9dadda5da5",children:"@-webkit-keyframes shine{0%{-webkit-transform:translatex(-100%);transform:translatex(-100%)}100%{-webkit-transform:translatex(100%);transform:translatex(100%)}}@-moz-keyframes shine{0%{-moz-transform:translatex(-100%);transform:translatex(-100%)}100%{-moz-transform:translatex(100%);transform:translatex(100%)}}@-o-keyframes shine{0%{-o-transform:translatex(-100%);transform:translatex(-100%)}100%{-o-transform:translatex(100%);transform:translatex(100%)}}@keyframes shine{0%{-webkit-transform:translatex(-100%);-moz-transform:translatex(-100%);-o-transform:translatex(-100%);transform:translatex(-100%)}100%{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}}"})]})}},171:function(t,e,a){a.d(e,{LG:function(){return i},iB:function(){return s},rn:function(){return o},ym:function(){return l}});var r=a(2265),n=a(9116);function o(t){let[e,a]=(0,r.useState)([]),[o,s]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),u=(0,r.useRef)(""),f=(0,r.useCallback)(async t=>{var r,o,l,d;let f=JSON.stringify({page:null!==(r=null==t?void 0:t.page)&&void 0!==r?r:1,limit:null!==(o=null==t?void 0:t.limit)&&void 0!==o?o:12,category:null==t?void 0:t.category,search:null==t?void 0:t.search,minPrice:null==t?void 0:t.minPrice,maxPrice:null==t?void 0:t.maxPrice,inStock:null==t?void 0:t.inStock,onSale:null==t?void 0:t.onSale,featured:null==t?void 0:t.featured,sortBy:null==t?void 0:t.sortBy,sortOrder:null==t?void 0:t.sortOrder});if(f!==u.current||!(e.length>0)){u.current=f,s(!0),i(null);try{let e=await n.hi.get("/shop/products",{page:null!==(l=null==t?void 0:t.page)&&void 0!==l?l:1,limit:null!==(d=null==t?void 0:t.limit)&&void 0!==d?d:12,category:null==t?void 0:t.category,search:null==t?void 0:t.search,minPrice:null==t?void 0:t.minPrice,maxPrice:null==t?void 0:t.maxPrice,inStock:null==t?void 0:t.inStock,onSale:null==t?void 0:t.onSale,featured:null==t?void 0:t.featured,sortBy:null==t?void 0:t.sortBy,sortOrder:null==t?void 0:t.sortOrder});a(e.items||[]),c(e.pagination)}catch(t){i(t.message)}finally{s(!1)}}},[e.length]),x=JSON.stringify(t);return(0,r.useEffect)(()=>{f(t)},[x]),{products:e,loading:o,error:l,pagination:d,fetchProducts:f}}function s(t){let[e,a]=(0,r.useState)(null),[o,s]=(0,r.useState)(!!t),[l,i]=(0,r.useState)(null),d=(0,r.useCallback)(async t=>{s(!0),i(null);try{let e=await n.hi.get("/shop/products/".concat(t));a(e)}catch(t){i(t.message),a(null)}finally{s(!1)}},[]);return(0,r.useEffect)(()=>{t&&d(t)},[t,d]),{product:e,loading:o,error:l,fetchProduct:d}}function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,[e,a]=(0,r.useState)([]),[o,s]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){try{let e=await n.hi.get("/shop/products",{featured:!0,limit:t});a(e.items||[])}catch(t){i(t.message)}finally{s(!1)}})()},[t]),{products:e,loading:o,error:l}}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,[e,a]=(0,r.useState)([]),[o,s]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){try{let e=await n.hi.get("/shop/products",{sortBy:"createdAt",sortOrder:"desc",limit:t});a(e.items||[])}catch(t){i(t.message)}finally{s(!1)}})()},[t]),{products:e,loading:o,error:l}}},9116:function(t,e,a){function r(t){localStorage.setItem("cart_session_id",t)}async function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{params:a,headers:r,...n}=e,o=t.startsWith("http")?t:"".concat("http://localhost:3000/api/v1").concat(t);if(a){let t=new URLSearchParams;Object.entries(a).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,String(r))});let e=t.toString();e&&(o+="?".concat(e))}let s={"Content-Type":"application/json",...r},l=localStorage.getItem("cart_session_id");l&&(s["X-Session-Id"]=l);let i=localStorage.getItem("auth_token");i&&(s.Authorization="Bearer ".concat(i));let d=await fetch(o,{...n,headers:s});if(!d.ok)throw Error((await d.json().catch(()=>({}))).error||"API Error: ".concat(d.status));let c=await d.json();if(!c.success&&c.error)throw Error(c.error);return c.data}a.d(e,{hi:function(){return o},xr:function(){return r}});let o={get:(t,e)=>n(t,{method:"GET",params:e}),post:(t,e)=>n(t,{method:"POST",body:e?JSON.stringify(e):void 0}),put:(t,e)=>n(t,{method:"PUT",body:e?JSON.stringify(e):void 0}),patch:(t,e)=>n(t,{method:"PATCH",body:e?JSON.stringify(e):void 0}),delete:t=>n(t,{method:"DELETE"})}},4508:function(t,e,a){a.d(e,{$Q:function(){return l},Jn:function(){return d},Ox:function(){return i},T4:function(){return s},cn:function(){return o},p6:function(){return c}});var r=a(1994),n=a(3335);function o(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,n.m6)((0,r.W)(e))}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR",a="string"==typeof t?parseFloat(t):t;return new Intl.NumberFormat("it-IT",{style:"currency",currency:e}).format(a)}function l(t,e){return t<=0||e>=t?0:Math.round((t-e)/t*100)}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/images/placeholder.jpg";return t?"string"==typeof t?t:t.url||t.src||e:e}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{day:"numeric",month:"long",year:"numeric"},a="string"==typeof t?new Date(t):t;return new Intl.DateTimeFormat("it-IT",e).format(a)}},3947:function(t,e,a){a.d(e,{x:function(){return l}});var r=a(9625),n=a(6885),o=a(9116),s=a(4508);let l=(0,r.Ue)()((0,n.tJ)((t,e)=>({cart:null,loading:!1,error:null,sessionId:null,isDrawerOpen:!1,initSession:()=>{let a=e().sessionId;a||t({sessionId:a=(0,s.Ox)()}),(0,o.xr)(a)},fetchCart:async()=>{t({loading:!0,error:null});try{e().initSession();let a=await o.hi.get("/shop/cart");t({cart:a,loading:!1})}catch(e){t({error:e.message,loading:!1})}},addItem:async(a,r,n)=>{t({loading:!0,error:null});try{e().initSession();let s=await o.hi.post("/shop/cart/items",{productId:a,quantity:r,variantId:n});t({cart:s,loading:!1,isDrawerOpen:!0})}catch(e){throw t({error:e.message,loading:!1}),e}},updateQuantity:async(e,a)=>{t({loading:!0,error:null});try{let r=await o.hi.patch("/shop/cart/items/".concat(e),{quantity:a});t({cart:r,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},removeItem:async e=>{t({loading:!0,error:null});try{let a=await o.hi.delete("/shop/cart/items/".concat(e));t({cart:a,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},clearCart:async()=>{t({loading:!0,error:null});try{await o.hi.delete("/shop/cart"),t({cart:null,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},applyCoupon:async e=>{t({loading:!0,error:null});try{let a=await o.hi.post("/shop/cart/coupon",{code:e});t({cart:a,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},removeCoupon:async()=>{t({loading:!0,error:null});try{let e=await o.hi.delete("/shop/cart/coupon");t({cart:e,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},setShippingAddress:async e=>{t({loading:!0,error:null});try{let a=await o.hi.put("/shop/cart/shipping-address",e);t({cart:a,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},setShippingMethod:async e=>{t({loading:!0,error:null});try{let a=await o.hi.put("/shop/cart/shipping-method",{methodId:e});t({cart:a,loading:!1})}catch(e){throw t({error:e.message,loading:!1}),e}},openDrawer:()=>t({isDrawerOpen:!0}),closeDrawer:()=>t({isDrawerOpen:!1}),toggleDrawer:()=>t(t=>({isDrawerOpen:!t.isDrawerOpen})),itemCount:()=>{let t=e().cart;return(null==t?void 0:t.items)?t.items.reduce((t,e)=>t+e.quantity,0):0},subtotal:()=>{var t;let a=e().cart;return null!==(t=null==a?void 0:a.subtotal)&&void 0!==t?t:0},total:()=>{var t;let a=e().cart;return null!==(t=null==a?void 0:a.total)&&void 0!==t?t:0},isEmpty:()=>{let t=e().cart;return!(null==t?void 0:t.items)||0===t.items.length}}),{name:"cart-storage",partialize:t=>({sessionId:t.sessionId})}))}}]);