(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[847],{6684:function(e,t,s){Promise.resolve().then(s.bind(s,8027))},8027:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),n=s(7648),i=s(3145),l=s(521),c=s(3247),o=s(4794);let d=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var u=s(407),x=s(9116),m=s(4508);let h={PENDING:{label:"In attesa",color:"text-warning"},CONFIRMED:{label:"Confermato",color:"text-blue-400"},PROCESSING:{label:"In lavorazione",color:"text-blue-400"},SHIPPED:{label:"Spedito",color:"text-gold"},DELIVERED:{label:"Consegnato",color:"text-success"},CANCELLED:{label:"Annullato",color:"text-error"},REFUNDED:{label:"Rimborsato",color:"text-text-muted"}};function f(){let[e,t]=(0,a.useState)([]),[s,f]=(0,a.useState)(!0),[p,g]=(0,a.useState)(""),[y,v]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=await x.hi.get("/shop/account/orders");e.success&&e.data&&t(e.data.items||[])}catch(e){g("Impossibile caricare gli ordini")}finally{f(!1)}})()},[]);let b=e.filter(e=>{var t;return(null===(t=e.orderNumber)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase()))||e.id.toLowerCase().includes(y.toLowerCase())});return s?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"bg-surface-card rounded-2xl p-6 animate-pulse",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-5 bg-surface-raised rounded w-32"}),(0,r.jsx)("div",{className:"h-4 bg-surface-raised rounded w-24"})]}),(0,r.jsx)("div",{className:"h-6 bg-surface-raised rounded w-20"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-surface-raised rounded"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-surface-raised rounded w-3/4"}),(0,r.jsx)("div",{className:"h-4 bg-surface-raised rounded w-1/2"})]})]})]},t))}):p?(0,r.jsx)("div",{className:"bg-surface-card rounded-2xl p-8 text-center",children:(0,r.jsx)("p",{className:"text-error",children:p})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsx)("h2",{className:"font-display text-2xl font-semibold text-white",children:"I Miei Ordini"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),(0,r.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"Cerca ordine...",className:"pl-12 pr-4 py-2 bg-surface-card border border-white/10 rounded-lg text-white placeholder-text-muted focus:outline-none focus:border-gold/50 w-full sm:w-64"})]})]}),0===b.length?(0,r.jsxs)("div",{className:"bg-surface-card rounded-2xl p-8 text-center",children:[(0,r.jsx)(o.Z,{className:"w-16 h-16 text-text-muted mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Nessun ordine trovato"}),(0,r.jsx)("p",{className:"text-text-secondary mb-6",children:y?"Prova con un termine di ricerca diverso":"Non hai ancora effettuato ordini"}),(0,r.jsx)(n.default,{href:"/shop",className:"btn-primary btn-medium",children:"Inizia lo Shopping"})]}):(0,r.jsx)("div",{className:"space-y-4",children:b.map((e,t)=>{var s,a;let c=h[e.status]||{label:e.status,color:"text-text-muted"};return(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,r.jsxs)(n.default,{href:"/account/orders/".concat(e.id),className:"block bg-surface-card rounded-2xl p-6 hover:bg-surface-raised transition-colors group",children:[(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-white",children:["Ordine #",e.orderNumber||e.id.slice(0,8)]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-secondary mt-1",children:[(0,r.jsx)(d,{className:"w-4 h-4"}),(0,m.p6)(e.createdAt)]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-sm font-medium ".concat(c.color),children:c.label}),(0,r.jsx)(u.Z,{className:"w-5 h-5 text-text-muted group-hover:text-gold transition-colors"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 overflow-x-auto pb-2",children:[null===(s=e.items)||void 0===s?void 0:s.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"relative w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden bg-surface-raised",children:[e.imageUrl&&(0,r.jsx)(i.default,{src:e.imageUrl,alt:e.name||"Product",fill:!0,className:"object-cover"}),e.quantity>1&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gold text-primary text-xs font-bold rounded-full flex items-center justify-center",children:e.quantity})]},e.id)),e.items&&e.items.length>4&&(0,r.jsx)("div",{className:"w-16 h-16 flex-shrink-0 rounded-lg bg-surface-raised flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-sm text-text-muted",children:["+",e.items.length-4]})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-white/10",children:[(0,r.jsxs)("span",{className:"text-text-secondary",children:[(null===(a=e.items)||void 0===a?void 0:a.reduce((e,t)=>e+t.quantity,0))||0," articoli"]}),(0,r.jsx)("span",{className:"font-semibold text-gold",children:(0,m.T4)(e.total)})]})]})},e.id)})})]})}},9116:function(e,t,s){"use strict";function r(e){localStorage.setItem("cart_session_id",e)}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{params:s,headers:r,...a}=t,n=e.startsWith("http")?e:"".concat("http://localhost:3000/api/v1").concat(e);if(s){let e=new URLSearchParams;Object.entries(s).forEach(t=>{let[s,r]=t;null!=r&&e.append(s,String(r))});let t=e.toString();t&&(n+="?".concat(t))}let i={"Content-Type":"application/json",...r},l=localStorage.getItem("cart_session_id");l&&(i["X-Session-Id"]=l);let c=localStorage.getItem("auth_token");c&&(i.Authorization="Bearer ".concat(c));let o=await fetch(n,{...a,headers:i});if(!o.ok)throw Error((await o.json().catch(()=>({}))).error||"API Error: ".concat(o.status));let d=await o.json();if(!d.success&&d.error)throw Error(d.error);return d.data}s.d(t,{hi:function(){return n},xr:function(){return r}});let n={get:(e,t)=>a(e,{method:"GET",params:t}),post:(e,t)=>a(e,{method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t)=>a(e,{method:"PUT",body:t?JSON.stringify(t):void 0}),patch:(e,t)=>a(e,{method:"PATCH",body:t?JSON.stringify(t):void 0}),delete:e=>a(e,{method:"DELETE"})}},4508:function(e,t,s){"use strict";s.d(t,{$Q:function(){return l},Jn:function(){return o},Ox:function(){return c},T4:function(){return i},cn:function(){return n},p6:function(){return d}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR",s="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("it-IT",{style:"currency",currency:t}).format(s)}function l(e,t){return e<=0||t>=e?0:Math.round((e-t)/e*100)}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/images/placeholder.jpg";return e?"string"==typeof e?e:e.url||e.src||t:t}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{day:"numeric",month:"long",year:"numeric"},s="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("it-IT",t).format(s)}},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4794:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[972,230,312,971,117,744],function(){return e(e.s=6684)}),_N_E=e.O()}]);