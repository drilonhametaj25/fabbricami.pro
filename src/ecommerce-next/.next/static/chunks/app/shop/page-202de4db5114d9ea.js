(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{7265:function(e,t,s){Promise.resolve().then(s.bind(s,3568))},3568:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(2265),i=s(9376),l=s(8614),n=s(521),c=s(9763);let o=(0,c.Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var d=s(875);let x=(0,c.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),h=(0,c.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var u=s(4527),g=s(2489),m=s(1174);function p(e){let{onClose:t,isMobile:s}=e,l=(0,i.useRouter)(),n=(0,i.useSearchParams)(),{categories:c,loading:d}=(0,m.L)(),x=n.get("category")||"",h=n.get("brand")||"",u=n.get("minPrice")||"",p=n.get("maxPrice")||"";n.get("sort");let b="true"===n.get("onSale"),v="true"===n.get("inStock"),[j,N]=(0,r.useState)({categories:!0,price:!0,brands:!1,availability:!1}),[w,k]=(0,r.useState)(u),[S,C]=(0,r.useState)(p),P=e=>{N(t=>({...t,[e]:!t[e]}))},E=(e,t)=>{let s=new URLSearchParams(n.toString());""===t||!1===t?s.delete(e):s.set(e,String(t)),s.delete("page"),l.push("/shop?".concat(s.toString()))},L=x||h||u||p||b||v;return(0,a.jsxs)("div",{className:"space-y-6 ".concat(s?"p-6":""),children:[s&&(0,a.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"w-5 h-5 text-gold"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Filters"})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 text-text-secondary hover:text-white transition-colors","aria-label":"Close filters",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})})]}),L&&(0,a.jsx)("button",{onClick:()=>{l.push("/shop"),null==t||t()},className:"text-sm text-gold hover:underline",children:"Clear All Filters"}),(0,a.jsx)(y,{title:"Categories",expanded:j.categories,onToggle:()=>P("categories"),children:d?(0,a.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-6 bg-surface-raised rounded animate-pulse"},t))}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("button",{onClick:()=>E("category",""),className:"w-full text-left py-2 px-3 rounded-lg transition-colors ".concat(x?"text-text-secondary hover:bg-surface-raised hover:text-white":"bg-gold/10 text-gold"),children:"All Categories"}),c.map(e=>(0,a.jsx)(f,{category:e,currentCategory:x,onSelect:e=>E("category",e)},e.id))]})}),(0,a.jsx)(y,{title:"Price",expanded:j.price,onToggle:()=>P("price"),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"number",placeholder:"Min",value:w,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 bg-surface-raised border border-white/10 rounded-lg text-white placeholder-text-muted focus:outline-none focus:border-gold/50"}),(0,a.jsx)("span",{className:"text-text-muted",children:"-"}),(0,a.jsx)("input",{type:"number",placeholder:"Max",value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-surface-raised border border-white/10 rounded-lg text-white placeholder-text-muted focus:outline-none focus:border-gold/50"})]}),(0,a.jsx)("button",{onClick:()=>{let e=new URLSearchParams(n.toString());w?e.set("minPrice",w):e.delete("minPrice"),S?e.set("maxPrice",S):e.delete("maxPrice"),e.delete("page"),l.push("/shop?".concat(e.toString()))},className:"w-full btn-secondary btn-small justify-center",children:"Apply"})]})}),(0,a.jsx)(y,{title:"Brand",expanded:j.brands,onToggle:()=>P("brands"),children:(0,a.jsx)("div",{className:"space-y-1",children:["Brand A","Brand B","Brand C","Brand D"].map(e=>(0,a.jsx)("button",{onClick:()=>E("brand",h===e?"":e),className:"w-full text-left py-2 px-3 rounded-lg transition-colors ".concat(h===e?"bg-gold/10 text-gold":"text-text-secondary hover:bg-surface-raised hover:text-white"),children:e},e))})}),(0,a.jsx)(y,{title:"Availability",expanded:j.availability,onToggle:()=>P("availability"),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:v,onChange:e=>E("inStock",e.target.checked),className:"w-5 h-5 rounded border-white/20 bg-surface-raised text-gold focus:ring-gold/50"}),(0,a.jsx)("span",{className:"text-text-secondary",children:"In Stock Only"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:b,onChange:e=>E("onSale",e.target.checked),className:"w-5 h-5 rounded border-white/20 bg-surface-raised text-gold focus:ring-gold/50"}),(0,a.jsx)("span",{className:"text-text-secondary",children:"On Sale"})]})]})}),s&&(0,a.jsx)("button",{onClick:t,className:"w-full btn-primary btn-large justify-center",children:"Show Results"})]})}function y(e){let{title:t,expanded:s,onToggle:r,children:i}=e;return(0,a.jsxs)("div",{className:"border-b border-white/10 pb-4",children:[(0,a.jsxs)("button",{onClick:r,className:"w-full flex items-center justify-between py-2 text-white font-medium",children:[t,(0,a.jsx)(d.Z,{className:"w-4 h-4 transition-transform ".concat(s?"rotate-180":"")})]}),(0,a.jsx)(l.M,{initial:!1,children:s&&(0,a.jsx)(n.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,a.jsx)("div",{className:"pt-3",children:i})})})]})}function f(e){let{category:t,currentCategory:s,onSelect:i,depth:c=0}=e,o=t.children&&t.children.length>0,x=o&&function e(t,s){for(let a of t)if(a.slug===s||a.children&&e(a.children,s))return!0;return!1}(t.children,s),[h,u]=(0,r.useState)(!0);return(0,a.jsxs)("div",{className:c>0?"ml-3 border-l border-white/10":"",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[o?(0,a.jsx)("button",{onClick:()=>u(!h),className:"p-1 text-text-muted hover:text-white flex-shrink-0",children:(0,a.jsx)(d.Z,{className:"w-4 h-4 transition-transform ".concat(h?"rotate-180":"")})}):(0,a.jsx)("span",{className:"w-6"}),(0,a.jsxs)("button",{onClick:()=>i(t.slug),className:"flex-1 text-left py-2 px-2 rounded-lg transition-colors text-sm ".concat(s===t.slug?"bg-gold/10 text-gold font-medium":x?"text-gold/70":"text-text-secondary hover:bg-surface-raised hover:text-white"),children:[t.name,void 0!==t.productCount&&t.productCount>0&&(0,a.jsxs)("span",{className:"ml-1 text-text-muted text-xs",children:["(",t.productCount,")"]})]})]}),(0,a.jsx)(l.M,{initial:!1,children:h&&o&&(0,a.jsx)(n.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"pl-2",children:t.children.map(e=>(0,a.jsx)(f,{category:e,currentCategory:s,onSelect:i,depth:c+1},e.id))})})]})}var b=s(171);let v=[{value:"newest",label:"Newest"},{value:"price-asc",label:"Price: Low to High"},{value:"price-desc",label:"Price: High to Low"},{value:"name-asc",label:"Name: A-Z"},{value:"name-desc",label:"Name: Z-A"},{value:"bestselling",label:"Best Sellers"},{value:"most-viewed",label:"Most Viewed"}];function j(){var e;let t=(0,i.useSearchParams)(),[s,c]=(0,r.useState)("grid"),[g,m]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),j=parseInt(t.get("page")||"1",10),N=t.get("category")||void 0,w=t.get("minPrice")?parseFloat(t.get("minPrice")):void 0,k=t.get("maxPrice")?parseFloat(t.get("maxPrice")):void 0,S=t.get("sort")||"newest",C="true"===t.get("onSale"),P="true"===t.get("inStock"),E=t.get("q")||void 0,{products:L,pagination:M,loading:Z,error:A}=(0,b.rn)({page:j,limit:12,category:N,minPrice:w,maxPrice:k,sortBy:S.includes("-")?S.split("-")[0]:"newest"===S?"createdAt":S,sortOrder:S.includes("desc")?"desc":"newest"===S?"desc":"asc",onSale:C||void 0,inStock:P||void 0,search:E}),O=(null==M?void 0:M.total)||0,R=(null==M?void 0:M.totalPages)||Math.ceil(O/12),B=(null===(e=v.find(e=>e.value===S))||void 0===e?void 0:e.label)||"Newest";return(0,r.useEffect)(()=>{let e=()=>f(!1);if(y)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[y]),(0,a.jsxs)("div",{className:"min-h-screen bg-primary",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-surface-card to-surface-raised py-12 lg:py-20",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 lg:px-8",children:[(0,a.jsx)("h1",{className:"font-display text-4xl md:text-5xl lg:text-6xl font-semibold text-white text-center",children:E?'Results for "'.concat(E,'"'):N||"Shop"}),(0,a.jsx)("p",{className:"text-text-secondary text-center mt-4 max-w-2xl mx-auto",children:"Discover our collection of miniatures, paints, and modeling accessories"})]})}),(0,a.jsx)("div",{className:"container mx-auto px-4 lg:px-8 py-8 lg:py-12",children:(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsx)("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsx)(p,{})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,a.jsx)("p",{className:"text-text-secondary",children:Z?"Loading...":"".concat(O," products found")}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>m(!0),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-surface-card rounded-lg text-white hover:bg-surface-raised transition-colors",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),"Filters"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(!y)},className:"flex items-center gap-2 px-4 py-2 bg-surface-card rounded-lg text-white hover:bg-surface-raised transition-colors",children:[B,(0,a.jsx)(d.Z,{className:"w-4 h-4 transition-transform ".concat(y?"rotate-180":"")})]}),(0,a.jsx)(l.M,{children:y&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-surface-card rounded-lg shadow-xl border border-white/10 overflow-hidden z-20",children:v.map(e=>(0,a.jsx)("a",{href:"?".concat(new URLSearchParams({...Object.fromEntries(t.entries()),sort:e.value,page:"1"}).toString()),className:"block px-4 py-2 text-sm transition-colors ".concat(S===e.value?"bg-gold/10 text-gold":"text-white hover:bg-surface-raised"),children:e.label},e.value))})})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center border border-white/10 rounded-lg overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>c("grid"),className:"p-2 transition-colors ".concat("grid"===s?"bg-gold text-primary":"text-white hover:bg-surface-raised"),"aria-label":"Grid view",children:(0,a.jsx)(x,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>c("list"),className:"p-2 transition-colors ".concat("list"===s?"bg-gold text-primary":"text-white hover:bg-surface-raised"),"aria-label":"List view",children:(0,a.jsx)(h,{className:"w-5 h-5"})})]})]})]}),Z?(0,a.jsx)("div",{className:"grid gap-6 ".concat("grid"===s?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-surface-card rounded-2xl overflow-hidden animate-pulse",children:[(0,a.jsx)("div",{className:"aspect-square bg-surface-raised"}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-surface-raised rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-surface-raised rounded w-1/2"})]})]},t))}):A?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-error",children:A})}):0===L.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-text-secondary text-lg",children:"No products found"}),(0,a.jsx)("p",{className:"text-text-muted mt-2",children:"Try adjusting your filters"})]}):(0,a.jsx)(n.E.div,{className:"grid gap-6 ".concat("grid"===s?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:L.map((e,t)=>(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:(0,a.jsx)(u.I,{product:e})},e.id))}),R>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-12",children:[(0,a.jsx)("a",{href:j>1?"?".concat(new URLSearchParams({...Object.fromEntries(t.entries()),page:String(j-1)}).toString()):"#",className:"px-4 py-2 rounded-lg transition-colors ".concat(1===j?"bg-surface-card text-gray-600 cursor-not-allowed":"bg-surface-card text-white hover:bg-surface-raised"),children:"Previous"}),(0,a.jsx)("div",{className:"hidden sm:flex items-center gap-1",children:[...Array(R)].map((e,s)=>{let r=s+1;return 1===r||r===R||r>=j-1&&r<=j+1?(0,a.jsx)("a",{href:"?".concat(new URLSearchParams({...Object.fromEntries(t.entries()),page:String(r)}).toString()),className:"w-10 h-10 flex items-center justify-center rounded-lg transition-colors ".concat(j===r?"bg-gold text-primary":"bg-surface-card text-white hover:bg-surface-raised"),children:r},r):r===j-2||r===j+2?(0,a.jsx)("span",{className:"px-2 text-text-muted",children:"..."},r):null})}),(0,a.jsx)("a",{href:j<R?"?".concat(new URLSearchParams({...Object.fromEntries(t.entries()),page:String(j+1)}).toString()):"#",className:"px-4 py-2 rounded-lg transition-colors ".concat(j===R?"bg-surface-card text-gray-600 cursor-not-allowed":"bg-surface-card text-white hover:bg-surface-raised"),children:"Next"})]})]})]})}),(0,a.jsx)(l.M,{children:g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>m(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden"}),(0,a.jsx)(n.E.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-y-0 left-0 w-80 bg-surface-card z-50 overflow-y-auto lg:hidden",children:(0,a.jsx)(p,{isMobile:!0,onClose:()=>m(!1)})})]})})]})}function N(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-10 h-10 border-4 border-gold border-t-transparent rounded-full animate-spin"})}),children:(0,a.jsx)(j,{})})}},1174:function(e,t,s){"use strict";s.d(t,{L:function(){return i}});var a=s(2265),r=s(9116);function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[n,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){try{let t=await r.hi.get("/shop/categories",e?{flat:!0}:void 0);s(t||[])}catch(e){c(e.message)}finally{l(!1)}})()},[e]),{categories:t,loading:i,error:n}}},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])}},function(e){e.O(0,[922,972,230,312,883,492,2,121,971,117,744],function(){return e(e.s=7265)}),_N_E=e.O()}]);