# ============================================
# EcommerceERP - Production Environment
# ============================================
# Copia questo file come .env e configura i valori
#
# Deploy consigliato: Hetzner VPS CX21 (2 vCPU, 4GB RAM)
# Costo: ~€9/mese (VPS + Storage Box per backup)

# ===========================================
# DOMAIN CONFIGURATION
# ===========================================
# Il tuo dominio principale (senza www)
# Configura questi record DNS:
#   A     @              -> IP_SERVER
#   A     api            -> IP_SERVER
#   A     erp            -> IP_SERVER
#   A     traefik        -> IP_SERVER (opzionale, per dashboard)
DOMAIN=tuodominio.it

# Email per certificati Let's Encrypt (riceverai notifiche scadenza)
ACME_EMAIL=admin@tuodominio.it

# ===========================================
# DATABASE (PostgreSQL)
# ===========================================
# Genera password sicura: openssl rand -base64 32
POSTGRES_USER=ecommerceerp
POSTGRES_PASSWORD=CAMBIA_QUESTA_PASSWORD_SICURA

# ===========================================
# CACHE & QUEUE (Redis)
# ===========================================
# Redis è CRITICO per: BullMQ jobs, email queue, sync WordPress, SDI
# Genera password sicura: openssl rand -base64 32
REDIS_PASSWORD=CAMBIA_QUESTA_PASSWORD_REDIS

# ===========================================
# JWT AUTHENTICATION
# ===========================================
# IMPORTANTE: Genera chiavi sicure per produzione!
# Comando: openssl rand -base64 64

JWT_SECRET=GENERA_UNA_CHIAVE_SICURA_DI_64_CARATTERI_MINIMO
JWT_REFRESH_SECRET=GENERA_UNA_CHIAVE_DIVERSA_DI_64_CARATTERI

# Durata token (raccomandato per produzione)
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ===========================================
# CORS - ALLOWED ORIGINS
# ===========================================
# Lista domini separati da virgola (HTTPS)
# Includi tutti i domini da cui si accede all'API
ALLOWED_ORIGINS=https://tuodominio.it,https://erp.tuodominio.it,https://www.tuodominio.it

# ===========================================
# LOGGING
# ===========================================
# Livelli: error, warn, info, debug
LOG_LEVEL=info
TRAEFIK_LOG_LEVEL=INFO

# ===========================================
# SDI - FATTURAZIONE ELETTRONICA
# ===========================================
SDI_ENABLED=false
# test = ambiente di test SDI, production = ambiente reale
SDI_MODE=test

# Codice destinatario SDI (7 caratteri) - da configurare per produzione
# SDI_CODICE_DESTINATARIO=0000000
# SDI_PEC=pec@pec.tuodominio.it

# ===========================================
# WORDPRESS/WOOCOMMERCE (Opzionale)
# ===========================================
# Disabilita sync se non usi WordPress
WORDPRESS_SYNC_ENABLED=false

# Se usi WordPress, configura:
# WORDPRESS_URL=https://shop.tuodominio.it
# WORDPRESS_API_KEY=ck_xxx
# WORDPRESS_CONSUMER_SECRET=cs_xxx
# WORDPRESS_WEBHOOK_SECRET=xxx

# ===========================================
# EMAIL SMTP
# ===========================================
# Configura per invio email (fatture, notifiche, ecc.)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=noreply@tuodominio.it
# SMTP_PASS=xxx
# SMTP_FROM=noreply@tuodominio.it

# ===========================================
# PAYMENT PROCESSING (Opzionale)
# ===========================================
# Stripe
# STRIPE_SECRET_KEY=sk_live_xxx
# STRIPE_PUBLISHABLE_KEY=pk_live_xxx
# STRIPE_WEBHOOK_SECRET=whsec_xxx

# PayPal
# PAYPAL_CLIENT_ID=xxx
# PAYPAL_CLIENT_SECRET=xxx
# PAYPAL_MODE=production

# ===========================================
# FILE UPLOAD
# ===========================================
MAX_FILE_SIZE=10485760
UPLOAD_DIR=/app/uploads

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_MAX=100
RATE_LIMIT_TIMEWINDOW=60000

# ===========================================
# TRAEFIK DASHBOARD (Opzionale)
# ===========================================
# Per proteggere il dashboard Traefik con basic auth:
# Genera con: htpasswd -nB admin | sed -e s/\\$/\\$\\$/g
# Esempio output: admin:$$2y$$05$$xxx
# TRAEFIK_USERS=admin:$$2y$$05$$xxx

# ===========================================
# BACKUP (Hetzner Storage Box - Opzionale)
# ===========================================
# Se usi Hetzner Storage Box per backup offsite
# BACKUP_SFTP_HOST=uXXXXXX.your-storagebox.de
# BACKUP_SFTP_USER=uXXXXXX
# BACKUP_SFTP_PATH=/backups
